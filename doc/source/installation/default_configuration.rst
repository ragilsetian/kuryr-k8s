=============================
Inspect default Configuration
=============================

By default, DevStack creates networks called ``private`` and ``public``:

.. code-block:: console

   $ openstack network list --project demo
   +--------------------------------------+---------+----------------------------------------------------------------------------+
   | ID                                   | Name    | Subnets                                                                    |
   +--------------------------------------+---------+----------------------------------------------------------------------------+
   | 12bc346b-35ed-4cfa-855b-389305c05740 | private | 1ee73076-e01e-4cec-a3a4-cbb275f94d0f, 8376a091-dcea-4ed5-b738-c16446e861da |
   +--------------------------------------+---------+----------------------------------------------------------------------------+

   $ openstack network list --project admin
   +--------------------------------------+--------+----------------------------------------------------------------------------+
   | ID                                   | Name   | Subnets                                                                    |
   +--------------------------------------+--------+----------------------------------------------------------------------------+
   | 646baf54-6178-4a26-a52b-68ad0ba1e057 | public | 00e0b1e4-4bee-4204-bd02-610291c56334, b1be34f2-7c3d-41ca-b2f5-6dcbd3c1715b |
   +--------------------------------------+--------+----------------------------------------------------------------------------+

And kuryr-kubernetes creates two extra ones for the kubernetes services and
pods under the project k8s:

.. code-block:: console

    $ openstack network list --project k8s
    +--------------------------------------+-----------------+--------------------------------------+
    | ID                                   | Name            | Subnets                              |
    +--------------------------------------+-----------------+--------------------------------------+
    | 1bff74a6-e4e2-42fb-a81b-33c9c144987c | k8s-pod-net     | 3c3e18f9-d1d0-4674-b3be-9fc8561980d3 |
    | d4be7efc-b84d-480e-a1db-34205877e6c4 | k8s-service-net | 55405e9d-4e25-4a55-bac2-e25ee88584e1 |
    +--------------------------------------+-----------------+--------------------------------------+

And similarly for the subnets:

.. code-block:: console

   $ openstack subnet list --project k8s
   +--------------------------------------+--------------------+--------------------------------------+---------------+
   | ID                                   | Name               | Network                              | Subnet        |
   +--------------------------------------+--------------------+--------------------------------------+---------------+
   | 3c3e18f9-d1d0-4674-b3be-9fc8561980d3 | k8s-pod-subnet     | 1bff74a6-e4e2-42fb-a81b-33c9c144987c | 10.0.0.64/26  |
   | 55405e9d-4e25-4a55-bac2-e25ee88584e1 | k8s-service-subnet | d4be7efc-b84d-480e-a1db-34205877e6c4 | 10.0.0.128/26 |
   +--------------------------------------+--------------------+--------------------------------------+---------------+

In addition to that, security groups for both pods and services are created too:

.. code-block:: console

   $ openstack security group list --project k8s
   +--------------------------------------+--------------------+------------------------+----------------------------------+
   | ID                                   | Name               | Description            | Project                          |
   +--------------------------------------+--------------------+------------------------+----------------------------------+
   | 00fd78f9-484d-4ea7-b677-82f73c54064a | service_pod_access | service_pod_access     | 49e2683370f245e38ac2d6a8c16697b3 |
   | fe7cee41-6021-4d7b-ab03-1ce1e391a1ca | default            | Default security group | 49e2683370f245e38ac2d6a8c16697b3 |
   +--------------------------------------+--------------------+------------------------+----------------------------------+

And finally, the loadbalancer for the kubernetes API service is also created,
with the subsequence listener, pool and added members:

.. code-block:: console

   $ openstack loadbalancer list
   +--------------------------------------+--------------------+----------------------------------+-------------+---------------------+----------+
   | id                                   | name               | tenant_id                        | vip_address | provisioning_status | provider |
   +--------------------------------------+--------------------+----------------------------------+-------------+---------------------+----------+
   | 7d0cf5b5-b164-4b32-87d3-ae6c82513927 | default/kubernetes | 47c28e562795468ea52e92226e3bc7b1 | 10.0.0.129  | ACTIVE              | haproxy  |
   +--------------------------------------+--------------------+----------------------------------+-------------+---------------------+----------+

   $ openstack loadbalancer listener list
   +--------------------------------------+--------------------------------------+------------------------+----------------------------------+----------+---------------+----------------+
   | id                                   | default_pool_id                      | name                   | tenant_id                        | protocol | protocol_port | admin_state_up |
   +--------------------------------------+--------------------------------------+------------------------+----------------------------------+----------+---------------+----------------+
   | abfbafd8-7609-4b7d-9def-4edddf2b887b | 70bed821-9a9f-4e1d-8c7e-7df89a923982 | default/kubernetes:443 | 47c28e562795468ea52e92226e3bc7b1 | HTTPS    |           443 | True           |
   +--------------------------------------+--------------------------------------+------------------------+----------------------------------+----------+---------------+----------------+

   $ openstack loadbalancer pool list
   +--------------------------------------+------------------------+----------------------------------+--------------+----------+----------------+
   | id                                   | name                   | tenant_id                        | lb_algorithm | protocol | admin_state_up |
   +--------------------------------------+------------------------+----------------------------------+--------------+----------+----------------+
   | 70bed821-9a9f-4e1d-8c7e-7df89a923982 | default/kubernetes:443 | 47c28e562795468ea52e92226e3bc7b1 | ROUND_ROBIN  | HTTPS    | True           |
   +--------------------------------------+------------------------+----------------------------------+--------------+----------+----------------+

   $ openstack loadbalancer member list default/kubernetes:443
   +--------------------------------------+------+----------------------------------+--------------+---------------+--------+--------------------------------------+----------------+
   | id                                   | name | tenant_id                        | address      | protocol_port | weight | subnet_id                            | admin_state_up |
   +--------------------------------------+------+----------------------------------+--------------+---------------+--------+--------------------------------------+----------------+
   | 5ddceaff-180b-47fa-b787-8921f4591cb0 |      | 47c28e562795468ea52e92226e3bc7b1 | 192.168.5.10 |          6443 |      1 | b1be34f2-7c3d-41ca-b2f5-6dcbd3c1715b | True           |
   +--------------------------------------+------+----------------------------------+--------------+---------------+--------+--------------------------------------+----------------+
